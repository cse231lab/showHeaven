--PROCEDURES

 DELIMITER $$
	CREATE PROCEDURE user_delete_reviews( in id INT)
	BEGIN
	DELETE FROM review 
	WHERE review.user_id = id;
	END$$
DELIMITER ;		

 DELIMITER $$
	CREATE PROCEDURE user_delete_lists( in in_id INT)
	BEGIN
    
	DELETE FROM follow
    WHERE list_id IN (SELECT id FROM list WHERE user_id = in_id );
    
    DELETE FROM list_items
    WHERE list_id IN (SELECT id FROM list WHERE user_id = in_id );
    
    DELETE FROM list
    WHERE user_id = in_id;
    
	END$$
DELIMITER ;								



TRIGGER for user delete

 DELIMITER $$
	CREATE TRIGGER user_delete
	BEFORE DELETE ON users
	FOR EACH ROW
	BEGIN
	CALL user_delete_reviews(OLD.id);
    CALL user_delete_lists(OLD.id);
	END$$
DELIMITER ;					